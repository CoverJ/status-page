---
import DashboardLayout from "@/layouts/DashboardLayout.astro";
import type { StatusPage, User } from "@/components/dashboard/DashboardSidebar";

// Dashboard pages must be server-rendered for auth
export const prerender = false;

// TODO: Replace with actual auth/session data from DT-007
const mockUser: User = {
	id: "user_1",
	email: "admin@example.com",
	name: "Admin User",
};

const mockPages: StatusPage[] = [
	{
		id: "page_1",
		name: "Acme Corp",
		subdomain: "acme",
	},
	{
		id: "page_2",
		name: "Widget Inc",
		subdomain: "widget",
	},
];

const pageId = Astro.url.searchParams.get("page") || mockPages[0].id;
const currentPage = mockPages.find((p) => p.id === pageId) || mockPages[0];
---

<DashboardLayout
	title="Incidents"
	user={mockUser}
	pages={mockPages}
	currentPage={currentPage}
>
	<div class="space-y-8">
		<div class="flex items-center justify-between">
			<div>
				<h1 class="text-3xl font-bold tracking-tight">Incidents</h1>
				<p class="text-muted-foreground mt-2">
					Manage incidents and communicate with your users.
				</p>
			</div>
			<button
				class="inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-4 w-4"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="2"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 6v6m0 0v6m0-6h6m-6 0H6"
					></path>
				</svg>
				Report Incident
			</button>
		</div>

		<div class="rounded-lg border bg-card">
			<div class="flex flex-col items-center justify-center py-16 text-center">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-12 w-12 text-muted-foreground/50"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="1"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
					></path>
				</svg>
				<h3 class="mt-4 text-lg font-medium">No incidents</h3>
				<p class="mt-2 text-sm text-muted-foreground max-w-sm">
					When something goes wrong, report an incident to keep your users
					informed about the issue and its resolution.
				</p>
			</div>
		</div>
	</div>
</DashboardLayout>
