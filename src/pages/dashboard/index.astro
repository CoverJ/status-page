---
import type { StatusPage, User } from "@/components/dashboard/DashboardSidebar";
import DashboardLayout from "@/layouts/DashboardLayout.astro";

// Dashboard pages must be server-rendered for auth
export const prerender = false;

// TODO: Replace with actual auth/session data from DT-007
// For now, using placeholder data for development
const mockUser: User = {
	id: "user_1",
	email: "admin@example.com",
	name: "Admin User",
};

const mockPages: StatusPage[] = [
	{
		id: "page_1",
		name: "Acme Corp",
		subdomain: "acme",
	},
	{
		id: "page_2",
		name: "Widget Inc",
		subdomain: "widget",
	},
];

// Get page from query param or default to first page
const pageId = Astro.url.searchParams.get("page") || mockPages[0].id;
const currentPage = mockPages.find((p) => p.id === pageId) || mockPages[0];
---

<DashboardLayout
	title="Overview"
	user={mockUser}
	pages={mockPages}
	currentPage={currentPage}
>
	<div class="space-y-8">
		<!-- Page Header -->
		<div>
			<h1 class="text-3xl font-bold tracking-tight">Overview</h1>
			<p class="text-muted-foreground mt-2">
				Welcome to your status page dashboard for {currentPage.name}.
			</p>
		</div>

		<!-- Quick Stats Cards -->
		<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
			<div class="rounded-lg border bg-card p-6">
				<div class="flex flex-row items-center justify-between space-y-0 pb-2">
					<h3 class="text-sm font-medium text-muted-foreground">Components</h3>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-4 w-4 text-muted-foreground"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"
						></path>
					</svg>
				</div>
				<div class="text-2xl font-bold">0</div>
				<p class="text-xs text-muted-foreground">All operational</p>
			</div>

			<div class="rounded-lg border bg-card p-6">
				<div class="flex flex-row items-center justify-between space-y-0 pb-2">
					<h3 class="text-sm font-medium text-muted-foreground">
						Active Incidents
					</h3>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-4 w-4 text-muted-foreground"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
						></path>
					</svg>
				</div>
				<div class="text-2xl font-bold">0</div>
				<p class="text-xs text-muted-foreground">No active incidents</p>
			</div>

			<div class="rounded-lg border bg-card p-6">
				<div class="flex flex-row items-center justify-between space-y-0 pb-2">
					<h3 class="text-sm font-medium text-muted-foreground">
						Scheduled Maintenance
					</h3>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-4 w-4 text-muted-foreground"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
						></path>
					</svg>
				</div>
				<div class="text-2xl font-bold">0</div>
				<p class="text-xs text-muted-foreground">No upcoming maintenance</p>
			</div>

			<div class="rounded-lg border bg-card p-6">
				<div class="flex flex-row items-center justify-between space-y-0 pb-2">
					<h3 class="text-sm font-medium text-muted-foreground">Subscribers</h3>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-4 w-4 text-muted-foreground"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
						></path>
					</svg>
				</div>
				<div class="text-2xl font-bold">0</div>
				<p class="text-xs text-muted-foreground">Email subscribers</p>
			</div>
		</div>

		<!-- Recent Activity -->
		<div class="rounded-lg border bg-card">
			<div class="p-6">
				<h2 class="text-lg font-semibold">Recent Activity</h2>
				<p class="text-sm text-muted-foreground">
					Your latest incidents and updates
				</p>
			</div>
			<div class="border-t p-6">
				<div class="flex flex-col items-center justify-center py-8 text-center">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-12 w-12 text-muted-foreground/50"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="1"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
						></path>
					</svg>
					<h3 class="mt-4 text-lg font-medium">No recent activity</h3>
					<p class="mt-2 text-sm text-muted-foreground">
						Create your first component or incident to get started.
					</p>
				</div>
			</div>
		</div>

		<!-- Quick Actions -->
		<div class="rounded-lg border bg-card p-6">
			<h2 class="text-lg font-semibold mb-4">Quick Actions</h2>
			<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
				<a
					href="/dashboard/components"
					class="flex items-center gap-3 rounded-lg border p-4 hover:bg-accent transition-colors"
				>
					<div class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10 text-primary">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-5 w-5"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M12 6v6m0 0v6m0-6h6m-6 0H6"
							></path>
						</svg>
					</div>
					<div>
						<p class="font-medium">Add Component</p>
						<p class="text-sm text-muted-foreground">Create a new component</p>
					</div>
				</a>

				<a
					href="/dashboard/incidents"
					class="flex items-center gap-3 rounded-lg border p-4 hover:bg-accent transition-colors"
				>
					<div class="flex h-10 w-10 items-center justify-center rounded-lg bg-orange-500/10 text-orange-500">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-5 w-5"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
							></path>
						</svg>
					</div>
					<div>
						<p class="font-medium">Report Incident</p>
						<p class="text-sm text-muted-foreground">Log a new incident</p>
					</div>
				</a>

				<a
					href="/dashboard/maintenance"
					class="flex items-center gap-3 rounded-lg border p-4 hover:bg-accent transition-colors"
				>
					<div class="flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10 text-blue-500">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-5 w-5"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
							></path>
						</svg>
					</div>
					<div>
						<p class="font-medium">Schedule Maintenance</p>
						<p class="text-sm text-muted-foreground">Plan upcoming work</p>
					</div>
				</a>

				<a
					href="/dashboard/settings"
					class="flex items-center gap-3 rounded-lg border p-4 hover:bg-accent transition-colors"
				>
					<div class="flex h-10 w-10 items-center justify-center rounded-lg bg-muted text-muted-foreground">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-5 w-5"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
							></path>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
							></path>
						</svg>
					</div>
					<div>
						<p class="font-medium">Page Settings</p>
						<p class="text-sm text-muted-foreground">Configure your page</p>
					</div>
				</a>
			</div>
		</div>
	</div>
</DashboardLayout>
