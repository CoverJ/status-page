---
import type { StatusPage, User } from "@/components/dashboard/DashboardSidebar";
import DashboardLayout from "@/layouts/DashboardLayout.astro";

// Dashboard pages must be server-rendered for auth
export const prerender = false;

// TODO: Replace with actual auth/session data from DT-007
const mockUser: User = {
	id: "user_1",
	email: "admin@example.com",
	name: "Admin User",
};

const mockPages: StatusPage[] = [
	{
		id: "page_1",
		name: "Acme Corp",
		subdomain: "acme",
	},
	{
		id: "page_2",
		name: "Widget Inc",
		subdomain: "widget",
	},
];

const pageId = Astro.url.searchParams.get("page") || mockPages[0].id;
const currentPage = mockPages.find((p) => p.id === pageId) || mockPages[0];
---

<DashboardLayout
	title="Subscribers"
	user={mockUser}
	pages={mockPages}
	currentPage={currentPage}
>
	<div class="space-y-8">
		<div class="flex items-center justify-between">
			<div>
				<h1 class="text-3xl font-bold tracking-tight">Subscribers</h1>
				<p class="text-muted-foreground mt-2">
					Manage users who subscribe to your status updates.
				</p>
			</div>
			<button
				class="inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-4 w-4"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="2"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 6v6m0 0v6m0-6h6m-6 0H6"
					></path>
				</svg>
				Add Subscriber
			</button>
		</div>

		<div class="rounded-lg border bg-card">
			<div class="flex flex-col items-center justify-center py-16 text-center">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-12 w-12 text-muted-foreground/50"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="1"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
					></path>
				</svg>
				<h3 class="mt-4 text-lg font-medium">No subscribers yet</h3>
				<p class="mt-2 text-sm text-muted-foreground max-w-sm">
					Subscribers receive notifications when incidents are created or
					updated. Share your status page to start building your subscriber
					list.
				</p>
			</div>
		</div>
	</div>
</DashboardLayout>
